import{u as L,v as y,b as h,F as M,a as g,D as k,_ as j,d as z,r as P,A as q,am as U,C as R,O as W,a2 as X,a4 as Z,t as C,N as u,z as G,L as J,X as K,B as Q,$ as V,an as S,ao as I}from"./framework.ced10535.js";const w=["success","info","warning","error"],Y={duration:{type:Number,default:3e3},message:{type:[String,Object,Function]},dangerouslyUseHTMLString:{type:Boolean,default:!1},icon:{type:String,default:""},id:{type:String,default:""},onClose:{type:Function,required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:w,default:"primary"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}},A=(e,s)=>{if(e.install=t=>{for(const o of[e,...Object.values(s??{})])t.component(o.name,o)},s)for(const[t,o]of Object.entries(s))e[t]=o;return e},x={name:{type:String,default:()=>"aixin"},color:{type:String},size:{type:String},pointer:{type:Boolean,default:()=>!1},spin:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:()=>!1}},ee=["xlink:href"],se=L({__name:"icon",props:x,setup(e){return(s,t)=>(y(),h("svg",{class:g(["icon dora-icon",{isSpin:s.spin,"is-loading":s.loading,allSpin:s.loading}]),"aria-hidden":"true",style:k({color:s.color,width:s.size,height:s.size,cursor:s.pointer?"pointer":"default"})},[M("use",{"xlink:href":`#icon-${s.name}`},null,8,ee)],6))}});const ne=j(se,[["__scopeId","data-v-6bc52b00"]]),E=A(ne),te=["id"],oe=["innerHTML"],ae=L({__name:"message",props:Y,emits:["destroy","close"],setup(e,{expose:s,emit:t}){const o=e,f={info:"reminder",success:"tick",warning:"warning",error:"Cross"};function i(l){const p=`dora-${l}`;return{n:d=>d?d.startsWith("--")?`${p}${d}`:`${p}__${d}`:p,classes:(...d)=>d.map(T=>{if(Array.isArray(T)){const[O,D,F=null]=T;return O?D:F}return T})}}const{n}=i("message"),a=z(!1),c=z(),m=P(()=>({top:o.offset+"px",zIndex:o.zIndex})),b=()=>{c.value=setTimeout(()=>{a.value=!1},o.duration)},v=()=>{c.value&&(clearTimeout(c.value),c.value=void 0)},B=()=>a.value=!1,H=()=>{t("close")};return q(()=>{b(),a.value=!0}),U(()=>{v()}),s({visible:a,close:B}),(l,p)=>(y(),R(V,{name:"message-fade",onBeforeLeave:H,onAfterLeave:p[0]||(p[0]=N=>t("destroy"))},{default:W(()=>[X(M("div",{id:l.id,class:g([u(n)(),l.type&&u(n)("--"+l.type)]),style:k(m.value)},[C(u(E),{name:l.icon||f[l.type]},null,8,["name"]),l.dangerouslyUseHTMLString?(y(),h("div",{key:1,class:g(u(n)("content")),innerHTML:l.message},null,10,oe)):(y(),h("div",{key:0,class:g(u(n)("content"))},[G(l.$slots,"default",{},()=>[J(K(l.message),1)])],2)),l.showClose?(y(),h("div",{key:2,class:g(u(n)("closeBtn")),onClick:B},[C(u(E),{name:"close"})],2)):Q("",!0)],14,te),[[Z,a.value]])]),_:3}))}}),$=e=>typeof e=="string",le=e=>typeof e=="function";let re=1;const r=[];let ce=2e3;const _=function(e={},s){($(e)||S(e))&&(e={message:e});const t=`message_${re++}`;let o=20;r.forEach(b=>{var v;o+=((v=b.el)==null?void 0:v.offsetHeight)+16});const f=e.onClose,i={...e,zIndex:ce++,id:t,offset:o,onClose:()=>{ie(t,f)}},n=i.message,a=C(ae,i,le(n)?{default:n}:S(n)?{default:()=>n}:null);a.props.onDestroy=()=>{I(null,c)};const c=document.createElement("div");I(a,c);let m=document.body;return $(e.appendTo)?m=document.querySelector(e.appendTo):e.appendTo&&e.appendTo instanceof Element&&(m=e.appendTo),m.appendChild(c.firstElementChild),r.push(a),{close:()=>a.component.proxy.visible=!1}};w.forEach(e=>{_[e]=(s={},t)=>{($(s)||S(s))&&(s={message:s}),_({...s,type:e})}});function ie(e,s){var i;const t=r.findIndex(n=>n.props.id===e);if(t===-1)return;const o=r[t];s&&s(o),r.splice(t,1);const f=o.el.offsetHeight;for(let n=t;n<r.length;n++){const a=parseInt((i=r[n].el)==null?void 0:i.style.top)-f+-16;r[n].component.props.offset=a}}function ue(){for(let e=r.length-1;e>=0;e--){const s=r[e].component;(s==null?void 0:s.proxy).close()}}_.closeAll=ue;const fe=A(_);export{fe as D,E as a,A as w};
